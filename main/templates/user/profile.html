{% extends "base.html" %}
{% block title %}{{ user.nickname }}{% endblock title %}

{% block css %}
<style type="text/css">
    .container {
        padding-top: 50px;
        padding-bottom: 80px;
        font-family: "微软雅黑","Microsoft Yahei","Helvetica Neue",Helvetica,"Hiragino Sans GB","Segoe UI",Tahoma,Arial,STHeiti,sans-serif !important;
    }
    #headimg {
        width: 100%;
    }
    /* main-info */

    /* exp-info */
    .progress {
        height: 25px;
        margin: 0;
    }
    #exp-info .category {
        font-size: 15px;
        font-weight: bold;
        margin-right: 5px;
    }

</style>
{% endblock css %}

{% block content %}
<div class="container">
    <div class='row'>
        <div class='hidden-xs col-sm-4 col-md-3 col-md-offset-1' id='gravatar'>
            <div class="panel panel-primary">
                <div class="panel-body">
                    <a href="/user/avatar/{{user.email}}" title="from gravatar.com">
                        <img id="headimg" src="{{ headimg }}">
                    </a>
                </div>
            </div>
        </div>
        <div class='col-xs-12 col-sm-8 col-md-7' id='exp-info'>
            <div class="panel panel-primary">
                <div class="panel-heading">活跃度</div>
                <div class="panel-body">
                    <ul class="list-group">
                        {% for exp in userexps %}
                        <a class="list-group-item" href="/user/exphistory?category={{exp.category}}">
                            <span class="category">{{ exp.getCategory }}</span>
                            <span class="badge"><b>Lv.{{ exp.getLevel }}</b></span>
                            <div class="progress">
                                <div class="progress-bar" style="width: {{ exp.getPersent }}%;">
                                    <b>{{ exp.exp }} / {{ exp.getLevelupExp }}</b>
                                </div>
                            </div>
                        </a>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div><!--.col-->
    </div><!--.row-->
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-10 col-md-offset-1" id='main-info'>
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#personal-info" aria-controls="personal-info" role="tab" data-toggle="tab">个人信息</a>
                </li>
                <li role="presentation">
                    <a href="#register-info" aria-controls="register-info" role="tab" data-toggle="tab">注册信息</a>
                </li>
                <li role="presentation">
                    <a href="#progress-info" aria-controls="progress-info" role="tab" data-toggle="tab">进度信息</a>
                </li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="personal-info">
                    <table class="table table-condensed table-hover">
                        <tr>
                            <th>id</th>
                            <td>{{ user.id }}</td>
                        </tr>
                        <tr>
                            <th>用户名</th>
                            <td>{{ user.username }}</td>
                        </tr>
                        <tr>
                            <th>昵称</th>
                            <td>{{ user.nickname }}</td>
                        </tr>
                        <tr>
                            <th>邮箱</th>
                            <td>{{ user.email }}</td>
                        </tr>
                    </table>
                    <div class="well">
                        <a href="/user/user?id={{ user.id }}" class="btn btn-success">
                            我的公开信息
                        </a>
                        <a href="/user/avatar/{{ user.email }}" class="btn btn-warning">
                            我的头像地址
                        </a>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="register-info">
                    <table class="table table-condensed table-hover">
                        <tr>
                            <th>问题</th>
                            <td>{{ user.question }}</td>
                        </tr>
                        <tr>
                            <th>答案1</th>
                            {% if user.answer1 %}
                            <td><i>[已加密]</i></td>
                            {% else %}
                            <td>无</td>
                            {% endif %}
                        </tr>
                        <tr>
                            <th>答案2</th>
                            {% if user.answer2 %}
                            <td><i>[已加密]</i></td>
                            {% else %}
                            <td>无</td>
                            {% endif %}
                        </tr>
                        <tr>
                            <th>提示</th>
                            {% if user.tip %}
                            <td>{{ user.tip }}</td>
                            {% else %}
                            <td>无</td>
                            {% endif %}
                        </tr>
                        <tr>
                            <th>创建时间</th>
                            <td>{{ user.getCreated }}</td>
                        </tr>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="progress-info">
                    施工中 ...
                </div>
            </div>
        </div><!--.col-->
    </div><!--.row-->
</div><!--.container-->
{% endblock content %}

{% block footer %}
    {{ block.super }}
    <style>
    #footer-div {
        position: fixed;
        bottom: 0;
    }
    </style>
{% endblock footer %}

{% block js %}
<script type="text/javascript">
$(function(){
    $('#exp-info .list-group-item').mouseover(function(){
        $(this).find('.progress').addClass('active').addClass('progress-striped');
    });
    $('#exp-info .list-group-item').mouseout(function(){
        $(this).find('.progress').removeClass('active').removeClass('progress-striped');
    });
})
</script>
{% endblock js %}
